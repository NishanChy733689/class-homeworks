<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Learnerly - Login</title>
    <link rel="stylesheet" href="/Learnerly/public/nav.css" />
    <link rel="stylesheet" href="log.css" />
    <!-- Firebase App (the core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <!-- Firebase Auth SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    
  </head>
  <body>
    <nav>
      <ul>
        <li>Learnerly</li>
        <li><a href="/Learnerly/home/index.html">Home</a></li>
        <li><a href="/Learnerly/home/agenda.html">About</a></li>
        <li><a href="/Learnerly/home/more.html">More</a></li>
        <li class="current">
          <button><a href="/Learnerly/home/login.html">Login</a></button>
        </li>
      </ul>
    </nav>
    <div class="Log">
      <h2>Login to Learnerly</h2>
      <form id="login-form">
        <input type="email" id="email" placeholder="Email" required /><br />
        <input
          type="password"
          id="password"
          placeholder="Password"
          required
        /><br />
        <button type="submit">Login with Email</button>
      </form>
      <div class="divider">or</div>
      <button id="show-signup" class="signup-btn">Sign Up</button>

      <!-- Sign Up Form (hidden by default) -->
      <form id="signup-form" style="display: none; margin-top: 20px">
        <input
          type="email"
          id="signup-email"
          placeholder="Email"
          required
        /><br />
        <input
          type="password"
          id="signup-password"
          placeholder="Password"
          required
        /><br />
        <button type="submit">Sign Up</button>
        <button type="button" id="show-login" style="margin-left: 10px">
          Back to Login
        </button>
      </form>

      <div id="login-message"></div>
    </div>
    <audio
      src="/Learnerly/public/80_Am_Relax_Chrds_01_164_SP.wav"
      autoplay
      loop
    ></audio>
    <script>
      // TODO: Replace with your Firebase project config
      const firebaseConfig = {
        apiKey: "AIzaSyCcDkFYWbzTelFDvANfSRfMCnEdJz0Ueug",

        authDomain: "learnerly-d8731.firebaseapp.com",

        projectId: "learnerly-d8731",

        storageBucket: "learnerly-d8731.firebasestorage.app",

        messagingSenderId: "564343825391",

        appId: "1:564343825391:web:f3b6293e8e59352613cc1a",

        measurementId: "G-SJWGRR8CTF",
      };
      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();

      // Email/password login
      document
        .getElementById("login-form")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const email = document.getElementById("email").value;
          const password = document.getElementById("password").value;
          auth
            .signInWithEmailAndPassword(email, password)
            .then(() => {
              window.location.href = "/Learnerly/main/preDash.html"; // Redirect on success
            })
            .catch((error) => {
              alert(error.message); // Optional: show error as alert
            });
        });

    

      // Toggle between login and signup forms
      document.getElementById("show-signup").onclick = function () {
        document.getElementById("login-form").style.display = "none";
        document.getElementById("show-signup").style.display = "none";
        document.getElementById("signup-form").style.display = "block";
      };

      document.getElementById("show-login").onclick = function () {
        document.getElementById("login-form").style.display = "block";
        document.getElementById("show-signup").style.display = "block";
        document.getElementById("signup-form").style.display = "none";
      };

      // Sign up with email/password
      document
        .getElementById("signup-form")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const email = document.getElementById("signup-email").value;
          const password = document.getElementById("signup-password").value;
          auth
            .createUserWithEmailAndPassword(email, password)
            .then(() => {
              alert("Login Succesful");
              window.location.href = "/Learnerly/home/index.html"; // Redirect on success
            })
            .catch((error) => {
              alert(error.message); // Optional: show error as alert
            });
        });
    </script>
  </body>
</html>
